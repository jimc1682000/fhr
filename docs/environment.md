# 環境變數與假日載入（Holiday Resilience）

系統會自動載入國定假日：2025 年走硬編碼，其餘年份先嘗試政府開放資料，失敗回退到基本固定假日（元旦、國慶）。

## 環境變數
- `HOLIDAY_API_MAX_RETRIES`：最大重試次數（預設 3）
- `HOLIDAY_API_BACKOFF_BASE`：指數退避基準秒數（預設 0.5）
- `HOLIDAY_API_MAX_BACKOFF`：每次重試的最大等待秒數上限（預設 8）

測試建議將上述值設為 0，以加快測試並避免 flakiness；網路呼叫請使用 mock（`urllib.request.urlopen`）。

## 國定假日支援細節

- 2025 年（當年）：使用硬編碼假日清單，效能最佳；包含春節、清明、端午、中秋、國慶等。
- 其他年份（2026+）：
  - 自動檢測出勤資料的年份
  - 優先從政府開放資料 API 動態載入
  - API 不可用時回退到基本固定假日（元旦、國慶）
  - 內建「重試 + 指數退避」策略（逾時/429/5xx 會重試數次，之後回退）

### 範例載入日誌
```
資訊: 動態載入 2026 年國定假日...
警告: 無法取得 2026 年完整假日資料，僅載入基本固定假日
```
